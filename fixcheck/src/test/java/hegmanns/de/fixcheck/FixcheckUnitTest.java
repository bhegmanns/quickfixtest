package hegmanns.de.fixcheck;


import org.junit.Test;

import hegmanns.de.fixcheck.core.FixDecoder;
import hegmanns.de.fixcheck.core.FixSpecification;
import quickfix.DataDictionary;
import quickfix.Message;
import quickfix.field.MsgType;

public class FixcheckUnitTest {

	@Test
	public void foo() throws Exception{
		String fixMsg = "1128=99=25535=X49=CME34=47134052=20100318-03:21:11.36475=20120904268=2279=122=848=336683=607400107=ESU2269=1270=140575271=152273=121014000336=2346=521023=1279=122=848=336683=607401107=ESU2269=1270=140600271=206273=121014000336=2346=681023=210=159";
		fixMsg = "1128=99=34835=X49=CME34=47128052=2012090312101416975=20120904268=3279=122=848=10‌​11383=64621107=ESZ2269=0270=139825271=13273=121014000336=2346=31023=1279=122=848=‌​336683=607316107=ESU2269=1270=140550271=10273=121014000336=2346=21023=1279=122=84‌​8=336683=607317107=ESU2269=1270=140725271=382273=121014000336=2346=681023=810=203";
		fixMsg = "8=FIX.4.19=15435=649=BRKR56=INVMGR34=23652=19980604-07:58:4823=11568528=N55=SPMI.MI54=227=20000044=10100.00000025=H10=159";

		System.out.println("FixMsg String:"+fixMsg);
		Message FIXMessage = new Message();
		DataDictionary dd = new DataDictionary("FIX41.xml");
		FIXMessage.fromString(fixMsg, dd, false);
		System.out.println("FIXMessage Output:" + FIXMessage.toString()); // Print message after parsing
		MsgType msgType = new MsgType();
		System.out.println(FIXMessage.getField(msgType));
	}
	
	@Test
	public void foo1(){
		String fixMsg = "1128=99=25535=X49=CME34=47134052=20100318-03:21:11.36475=20120904268=2279=122=848=336683=607400107=ESU2269=1270=140575271=152273=121014000336=2346=521023=1279=122=848=336683=607401107=ESU2269=1270=140600271=206273=121014000336=2346=681023=210=159";
		fixMsg = "1128=99=34835=X49=CME34=47128052=2012090312101416975=20120904268=3279=122=848=10‌​11383=64621107=ESZ2269=0270=139825271=13273=121014000336=2346=31023=1279=122=848=‌​336683=607316107=ESU2269=1270=140550271=10273=121014000336=2346=21023=1279=122=84‌​8=336683=607317107=ESU2269=1270=140725271=382273=121014000336=2346=681023=810=203";
		fixMsg = "8=FIX.4.19=15435=649=BRKR56=INVMGR34=23952=19980604-08:00:3623=11568728=N55=PIRI.MI54=127=30000044=5950.00000025=H10=168";

		
		FixDecoder decoder = new FixDecoder(FixSpecification.FIX41);
		Message message = decoder.parseFixMessage(fixMsg);
		decoder.print(message);
	}
}
